# コーディング規約書

## 目次
[[_TOC_]]

## 1. 目的
このコーディング規約書は、taskAPIの開発におけるコーディングスタイルやベストプラクティスを定義するものです。全ての開発者はこの規約に従ってコーディングを行うことを求められます。

## 2. コーディングスタイル

### 2.1 一般ルール
- コードは英語で記述し、コメントは日本語で書くこと。
- インデントはスペース4つ分を使用し、タブは使用しないこと。
- 行の長さは120文字を超えないようにする。
- **VSCodeを使用する**が、保存時のフォーマッタを使用することが推奨される。以下の設定を行う：
  - 「Editor: Format On Save」を有効にする。
  - プロジェクトのルートに `.vscode/settings.json` ファイルを作成し、必要なフォーマッタ設定を追加する。

### 2.2 命名規則
- クラス名は大文字のキャメルケース（例: `TaskApiService`）を使用する。
- メソッド名は小文字のキャメルケース（例: `processTask`）を使用する。
- 変数名は小文字のキャメルケース（例: `taskList`）を使用する。
- 定数は全て大文字のスネークケース（例: `MAX_RETRIES`）を使用する。

#### クラス名
- **正しい例**
  - `UserService` - ユーザーに関するサービスを提供するクラス
  - `OrderController` - 注文に関連する操作を管理するコントローラー
  - `ProductRepository` - 商品データを扱うリポジトリ

- **誤った例**
  - `user` - クラス名は名詞の単数形で始めるべき
  - `Service` - 意味が不明確で、クラスの役割がわからない

#### メソッド名
- **正しい例**
  - `createUser` - 新しいユーザーを作成するメソッド
  - `getOrderById` - 注文IDに基づいて注文を取得するメソッド
  - `calculateTotalPrice` - 合計金額を計算するメソッド

- **誤った例**
  - `doSomething` - 何をするメソッドなのか不明
  - `x` - 名前から機能を推測できない

#### 変数名
- **正しい例**
  - `userList` - ユーザーのリスト
  - `orderCount` - 注文の数
  - `productPrice` - 商品の価格

- **誤った例**
  - `a` - 変数の意味が不明
  - `temp` - 一時的な変数であるが、何のために使われるのかがわからない

#### 定数
- **正しい例**
  - `MAX_CONNECTIONS` - 最大接続数
  - `DEFAULT_TIMEOUT` - デフォルトのタイムアウト値
  - `PI` - 円周率

- **誤った例**
  - `max` - 何の最大値か不明
  - `const1` - 意味が全くわからない

### 2.3 コメント
- 公開メソッドには、目的や使用方法を説明するJavaDocを記述する。
- 複雑なロジックにはインラインコメントを使用し、何をしているのかを明確にする。

## 3. プロジェクト構造
```
/taskAPI
├── src
│   ├── main
│   │   ├── java
│   │   │   └── com
│   │   │       └── bmpworkflow
│   │   │           └── taskapi
│   │   │               ├── controller         # コントローラークラス
│   │   │               ├── service            # サービスクラス
│   │   │               ├── repository         # リポジトリクラス
│   │   │               ├── model              # モデルクラス
│   │   │               └── kafka              # Kafka関連のクラス
│   │   └── resources
│   │       ├── application.yml
│   │       └── ...
│   └── test
│       └── java
│           └── com
│               └── bmpworkflow
│                   └── taskapi
│                       └── ...
└── build.gradle
```

## 4. 依存関係管理
- 依存関係は`build.gradle`ファイルに記述し、必要に応じて最新の安定版を指定すること。
- 依存関係を追加する際は、プロジェクト全体に与える影響を考慮し、最小限に抑えること。

## 5. テスト
- 各クラスには単体テストを作成し、JUnitを使用すること。
- テストメソッド名は日本語を使用し、内容を説明するものとする（例: `有効な入力の場合正しい結果を返す`）。

## 6. デプロイ
- デプロイはCI/CDツールを使用し、自動化されたテストを通過した後に行うこと。
- 環境変数を使用して、開発環境、ステージング環境、本番環境を区別すること。

## 7. コードレビュー
- プルリクエストは必ず作成し、最低1人のレビューを受けること。
- レビューでは、コーディング規約の遵守、テストの充実、ビジネスロジックの正当性を確認する。

## 8. バージョン管理
- GitLabを使用し、ブランチ名は機能の概要を表すものとする（例: `feature/add-task-api`）。
- コミットメッセージは、変更の内容を簡潔に説明すること。

## 9. 参考文献
- [Camunda Documentation](https://camunda.com/docs/)
- [Apache Kafka Documentation](https://kafka.apache.org/documentation/)
- [Spring Boot Documentation](https://spring.io/projects/spring-boot)
